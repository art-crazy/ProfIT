<html>
  <head>
    <script>
      // ВВОД ИСХОДНЫХ ДАННЫХ.

      const maxRait = 500000;
      console.log("Добро пожаловать на Олимийские Игры 2035!");
      let stepOneRound = Number(prompt("Введи кличество этапов первого круга"));

      class sportsmanCreator {
        constructor(
          number,
          surname,
          name,
          rating,
          summMinTimeOneRound,
          country
        ) {
          this.number = number;
          this.surname = surname;
          this.name = name;
          this.rating = rating;
          this.summMinTimeOneRound = summMinTimeOneRound;
          this.country = country;
        }
      }

      function countryCalcTimeTwoPart(countryArray, countryName, k) {
        console.log("");
        console.log("Страна: " + countryName);
        let timing = [];
        for (let j = 0; j < countryArray.length; j++) {
          timing[j] = time(countryArray[k]);
          console.log(
            "Спортсмен: " +
              countryArray[j].name +
              " " +
              countryArray[j].surname +
              ". Результат этапа №" +
              (k + 1) +
              ": " +
              timing[j]
          );
        }

        let minTime = Math.min(...timing);
        console.log("Лучший результат: " + minTime);
        return minTime;
      }

      function countryCalcTime(countryArray, countryName, k) {
        console.log("");
        console.log("Страна: " + countryName);
        let timing = [];

        for (let j = 0; j < countryArray.length; j++) {
          timing[j] = time(countryArray[j].rating);

          console.log(
            "Спортсмен: " +
              countryArray[j].name +
              " " +
              countryArray[j].surname +
              ". Результат этапа №" +
              (k + 1) +
              ": " +
              timing[j]
          );
        }

        let maxTime = Math.max(...timing);
        console.log("Худший результат: " + maxTime);

        return maxTime;
      }

      function countryPlaceTwoPart(k) {
        DE = countryCalcTimeTwoPart(
          arrBicyclistDE,
          arrBicyclistDE[0].country,
          k
        );

        FR = countryCalcTimeTwoPart(
          arrBicyclistFR,
          arrBicyclistFR[0].country,
          k
        );

        UK = countryCalcTimeTwoPart(
          arrBicyclistUK,
          arrBicyclistUK[0].country,
          k
        );

        BY = countryCalcTimeTwoPart(
          arrBicyclistBY,
          arrBicyclistBY[0].country,
          k
        );

        let countries = [DE, FR, UK, BY];

        console.log("");
        console.log("Результат этапа №" + (k + 1) + " второго круга:");

        countries.sort(function (a, b) {
          return a - b;
        });

        // Вывод результата этапа
        for (let k = 0; k < countries.length; k++) {
          if (countries[k] == DE) {
            console.log(k + 1 + " место - DE");
          } else if (countries[k] == FR) {
            console.log(k + 1 + " место - FR");
          } else if (countries[k] == UK) {
            console.log(k + 1 + " место - UK");
          } else if (countries[k] == BY) {
            console.log(k + 1 + " место - BY");
          }
        }
      }

      function countryPlace(k) {
        DE = countryCalcTime(arrBicyclistDE, arrBicyclistDE[0].country, k);
        FR = countryCalcTime(arrBicyclistFR, arrBicyclistFR[0].country, k);
        UK = countryCalcTime(arrBicyclistUK, arrBicyclistUK[0].country, k);
        BY = countryCalcTime(arrBicyclistBY, arrBicyclistBY[0].country, k);

        let countries = [DE, FR, UK, BY];

        console.log("");
        console.log("Результат этапа №" + (k + 1) + " первого круга:");

        countries.sort(function (a, b) {
          return a - b;
        });

        // Вывод результата 1 круга

        for (let k = 0; k < countries.length; k++) {
          if (countries[k] == DE) {
            console.log(k + 1 + " место - DE");
          } else if (countries[k] == FR) {
            console.log(k + 1 + " место - FR");
          } else if (countries[k] == UK) {
            console.log(k + 1 + " место - UK");
          } else if (countries[k] == BY) {
            console.log(k + 1 + " место - BY");
          }
        }
      }

      function time(coefficient) {
        let time = 0;

        for (let i = 0; i < stepOneRound; i++) {
          time += Math.random() * 5 * (500000 / maxRait);
          time = Math.round(time * 100) / 100;
        }

        return time;
      }

      function TimingAndSum(countryArray) {
        let timing = [];

        for (let i = 0; i < countryArray.length; i++) {
          timing[i] = time(countryArray[i].rating);
        }

        let sum = 0;

        for (let i = 0; i < timing.length; i++) {
          sum += timing[i];
        }

        console.log("Сумма времени " + sum);

        return sum;
      }

      // Германия

      let bicyclistDE1 = new sportsmanCreator(
        1,
        "Tadej",
        "Pogacar",
        291216,
        0,
        "DE"
      );

      let bicyclistDE2 = new sportsmanCreator(
        2,
        "Glockner",
        "Michael",
        339867,
        0,
        "DE"
      );

      let bicyclistDE3 = new sportsmanCreator(
        3,
        "Mikkel",
        "Bjerg",
        282563,
        0,
        "DE"
      );

      let bicyclistDE4 = new sportsmanCreator(
        4,
        "Glockner4",
        "Michael4",
        171370,
        0,
        "DE"
      );

      // Франция

      let bicyclistFR1 = new sportsmanCreator(
        1,
        "Rafal",
        "Majka",
        154498,
        0,
        "FR"
      );

      let bicyclistFR2 = new sportsmanCreator(
        2,
        "Steven",
        "Kruijswijk",
        223522,
        0,
        "FR"
      );

      let bicyclistFR3 = new sportsmanCreator(
        3,
        "Glockner7",
        "Michael7",
        166192,
        0,
        "FR"
      );

      let bicyclistFR4 = new sportsmanCreator(
        4,
        "Sepp",
        "Kuss",
        222544,
        0,
        "FR"
      );

      // Англия

      let bicyclistUK1 = new sportsmanCreator(
        1,
        "Daniel",
        "Felipe",
        327516,
        0,
        "UK"
      );

      let bicyclistUK2 = new sportsmanCreator(
        2,
        "Mikael",
        "Cherel",
        116927,
        0,
        "UK"
      );

      let bicyclistUK3 = new sportsmanCreator(
        3,
        "Benoit",
        "Cosnefroy",
        342436,
        0,
        "UK"
      );

      let bicyclistUK4 = new sportsmanCreator(
        4,
        "Aurelien",
        "Paret",
        209631,
        0,
        "UK"
      );

      // Белоруссия

      let bicyclistBY1 = new sportsmanCreator(
        1,
        "Felix",
        "Grobschartner",
        66427,
        0,
        "BY"
      );

      let bicyclistBY2 = new sportsmanCreator(
        2,
        "Marco",
        "Haller",
        96105,
        0,
        "BY"
      );

      let bicyclistBY3 = new sportsmanCreator(
        3,
        "Lennard",
        "Kamna",
        178829,
        0,
        "BY"
      );

      let bicyclistBY4 = new sportsmanCreator(
        4,
        "Maximilian",
        "Schachmann",
        172144,
        0,
        "BY"
      );

      let arrBicyclistDE = [
        bicyclistDE1,
        bicyclistDE2,
        bicyclistDE3,
        bicyclistDE4,
      ];

      let arrBicyclistFR = [
        bicyclistFR1,
        bicyclistFR2,
        bicyclistFR3,
        bicyclistFR4,
      ];

      let arrBicyclistUK = [
        bicyclistUK1,
        bicyclistUK2,
        bicyclistUK3,
        bicyclistUK4,
      ];

      let arrBicyclistBY = [
        bicyclistBY1,
        bicyclistBY2,
        bicyclistBY3,
        bicyclistBY4,
      ];

      console.log("Круг №1");

      for (let i = 0; i < stepOneRound; i++) {
        countryPlace(i);
      }

      DE = TimingAndSum(arrBicyclistDE);
      FR = TimingAndSum(arrBicyclistFR);
      UK = TimingAndSum(arrBicyclistUK);
      BY = TimingAndSum(arrBicyclistBY);

      let countries = [DE, FR, UK, BY];

      countries.sort(function (a, b) {
        return b - a;
      });

      console.log("");
      console.log("Итоги первого круга:");

      for (let i = 0; i < countries.length; i++) {
        if (countries[i] == DE) {
          console.log(i + 1 + " место - DE");
        } else if (countries[i] == FR) {
          console.log(i + 1 + " место - FR");
        } else if (countries[i] == UK) {
          console.log(i + 1 + " место - UK");
        } else if (countries[i] == BY) {
          console.log(i + 1 + " место - BY");
        }
      }

      // ВТОРОЙ КРУГ

      alert("Жамкни <OK>, чтобы начать второй этап");

      console.log("Круг №2");

      for (let i = 0; i < 2; i++) {
        countryPlaceTwoPart(i);
      }

      DE = TimingAndSum(arrBicyclistDE);
      FR = TimingAndSum(arrBicyclistFR);
      UK = TimingAndSum(arrBicyclistUK);
      BY = TimingAndSum(arrBicyclistBY);

      countries = [DE, FR, UK, BY];

      countries.sort(function (a, b) {
        return b - a;
      });

      console.log("");
      console.log("Итоги второго круга:");

      // Вывод результата 2 круга
      for (let i = 0; i < countries.length; i++) {
        if (countries[i] == DE) {
          console.log(i + 1 + " место - DE");
        } else if (countries[i] == FR) {
          console.log(i + 1 + " место - FR");
        } else if (countries[i] == UK) {
          console.log(i + 1 + " место - UK");
        } else if (countries[i] == BY) {
          console.log(i + 1 + " место - BY");
        }
      }
    </script>
  </head>
  <body>
    <h1>
      В соревновании по велоспорту участвуют по 4 гонщика из каждой страны. О
      каждом гонщике известны следующие данные:
    </h1>
    <h1>номер,</h1>
    <h1>фамилия,</h1>
    <h1>имя,</h1>
    <h1>рейтинг.</h1>
    <h1>Соревнование проходит в два круга. Первый круг состоит из N этапов.</h1>
    <h1>
      Место страны на этапе определяется по времени худшего (занявшего четвертое
      место) гонщика этой страны на рассматриваемом этапе. --
    </h1>
    <h1>
      Место страны в итоговом протоколе первого круга определяется по наименьшей
      сумме мест, занятых страной на этапах, а при равенстве этого показателя –
      по более высокому месту в итоговом протоколе (в личном зачёте) лучших
      гонщиков конкурирующих стран.
    </h1>
    <h1>Во второй круг проходит 4 страны имеющие лучший результат.</h1>
    <h1>Второй круг проходит в два этапа.</h1>
    <h1>
      Место страны на этапе определяется по времени лучшего (занявшего первое
      место) гонщика этой страны на рассматриваемом этапе. Место страны в
      итоговом протоколе второго круга определяется по наименьшей сумме мест,
      занятых страной на этапах, а при равенстве этого показателя – по средне
      арифметическому значению рейтинга всех гонщиков страны.
    </h1>
    <h1>
      Примечание: После проведения первого круга соревнований, должен быть
      выведен итоговый протокол по гонщикам и по странам.
    </h1>
    <h1>Для проведения второго круга требуется подтверждение пользователя.</h1>
    <h1>
      Затем выводится итоговый протокол по второму кругу и отдельно сообщение о
      стране-победителе соревнований.
    </h1>
    <p>23 июля 2022 года</p>
  </body>
</html>
